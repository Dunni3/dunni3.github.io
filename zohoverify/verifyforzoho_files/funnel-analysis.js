"use strict";!function(e,n,t){var a=e.ZAB.zab,i=(e.ZAB.funnel_experiment,!1),r=function(e,n,t,i){var r=a.getUserAgentRawData(),u={frd:{a:ZAB.portal,b:e,c:n,d:t,n:!ZAB.returning},urd:r};a.sendDataToServer(5,u)},u={},o=function(e,t,r){if(i){var c=r||(new Date).getTime()+"unID"+Math.random(),l=function(e,n){try{t(n)}catch(e){}for(var a in delete u[e],u){o(u[a].experimentKey,u[a].callback,a);break}}.bind(null,c);("{}"===JSON.stringify(u)||r)&&a.iframeCommunication(6,{key:e,callback:l}),u[c]={experimentKey:e,callback:t}}else{var s=n.cookie.match(e+"=([^;]*)"),f=s&&s.length>=2?s[1]:null;t(f)}},c=function(e,t,r){var u=(new Date).getTime()+r,o=new Date(u).toGMTString(),c=e,l={visitId:t,expires:o},s=encodeURIComponent(JSON.stringify(l))+"; expires="+o+";path=/";return i?a.iframeCommunication(7,{key:c,value:s}):n.cookie=c+"="+s,l},l=function(e){var t=n.URL;for(var i in ZAB.funnel_experiment){var u=ZAB.funnel_experiment[i],l=[];for(var s in u.steps){var f=u.steps[s],m=!1;try{if(f.custom_step)a.equalsIgnoreCase(f.custom_step,e)&&(m=!0);else if(!e)for(var p=0;p<f.url.length;p++)8!=f.url[p].match_type&&!m&&a.isURLSMatch(t,f.url[p])&&(m=!0)}catch(e){}m&&l.push(f)}l.length>0&&o(i,function(e,n,t,i){var u=null,o=null;a.exists(i)?u=(o=JSON.parse(decodeURIComponent(i))).visitId:(u=(new Date).getTime()+"psf"+Math.random(),o=c(e.key,u,e.session_time));for(var l=0;l<n.length;l++)try{var s=n[l];if(a.exists(i)){var f=t.cookie.match("zab_"+s.key+"=([^;]*)");r(e.key,s.key,u),null==f&&(t.cookie="zab_"+s.key+"="+u+"; expires="+o.expires+";path=/")}else t.cookie="zab_"+s.key+"="+u+"; expires="+o.expires+";path=/",r(e.key,s.key,u)}catch(e){}}.bind(null,u,l,n))}},s=function(){l(),function(){if(e.ZAB.funnel_queue&&e.ZAB.funnel_queue.constructor==Array)for(var n=0;n<e.ZAB.funnel_queue.length;n++){var t=e.ZAB.funnel_queue.shift().step_name;l(t)}e.ZAB.funnel_queue=e.ZAB.funnel_queue||[],e.ZAB.funnel_queue.push=function(e){l(e.step_name)}}()},f=function(){var n;e.ZAB.isIframeLoaded()?(n=function(n){i=n,s(),e.addEventListener("urlchange",function(){s()})},a.iframeCommunication(12,{callback:n})):e.setTimeout(f,20)};f()}(window,document,navigator);